TODO: 
1) Include <functional> and use std::function to fix the code
2) Make the hookup to allow ray tracing